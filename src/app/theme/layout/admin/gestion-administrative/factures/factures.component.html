<div class="factures-wrapper">
  <h2 class="page-title">Factures</h2>

  <div class="factures-grid">
    <div class="facture-card" *ngFor="let f of factures">
      <div class="facture-header">
        <h3 class="patient-name">{{ f.patient }}</h3>
      </div>

      <div class="facture-info">
        <p><strong>Montant :</strong> {{ f.montant }} TND</p>
        <p><strong>Date :</strong> {{ f.date }}</p>
        <p>
          <strong>Status :</strong>
          <span class="status" [ngClass]="f.status === 'Payé' ? 'paid' : 'pending'">
            {{ f.status }}
          </span>
        </p>
      </div>

      <button class="details-btn" (click)="openModal(f)">
        Voir Détails
      </button>
    </div>
  </div>
</div>

<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-content">
    <button class="close-btn" (click)="closeModal()">×</button>

    <h2 class="modal-title">Facture de {{ selectedFacture?.patient }}</h2>

    <div class="modal-body">
      <p><strong>Patient :</strong> {{ selectedFacture?.patient }}</p>
      <p><strong>Adresse :</strong> {{ selectedFacture?.adresse }}</p>
      <p><strong>Médecin :</strong> {{ selectedFacture?.medecin }}</p>
      <p><strong>Diagnostic :</strong> {{ selectedFacture?.diagnostique }}</p>
      <p><strong>Montant :</strong> {{ selectedFacture?.montant }} TND</p>
      <p><strong>Date :</strong> {{ selectedFacture?.date }}</p>
      <p><strong>Status :</strong> {{ selectedFacture?.status }}</p>
    </div>

    <button class="print-btn" (click)="printFacture()">Imprimer</button>
  </div>
</div>
